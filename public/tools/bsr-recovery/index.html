<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BSR Recovery Dashboard | Glue Masters</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #0f172a;
            --bg-card: #1e293b;
            --bg-card-hover: #334155;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --accent-blue: #3b82f6;
            --accent-green: #22c55e;
            --accent-red: #ef4444;
            --accent-yellow: #eab308;
            --accent-orange: #f97316;
            --accent-purple: #a855f7;
            --border: #334155;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            min-height: 100vh;
            padding: 24px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 32px;
            padding-bottom: 24px;
            border-bottom: 1px solid var(--border);
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        .logo h1 {
            font-size: 24px;
            font-weight: 700;
        }
        
        .logo span {
            color: var(--accent-blue);
        }
        
        .bsr-badge {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .bsr-current {
            background: var(--accent-red);
            padding: 8px 16px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 18px;
        }
        
        .bsr-arrow {
            font-size: 24px;
            color: var(--text-muted);
        }
        
        .bsr-target {
            background: var(--accent-green);
            padding: 8px 16px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 18px;
            opacity: 0.6;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
            margin-bottom: 32px;
        }
        
        .stat-card {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--border);
        }
        
        .stat-card h3 {
            color: var(--text-secondary);
            font-size: 13px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 8px;
        }
        
        .stat-value {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 4px;
        }
        
        .stat-change {
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        .stat-change.positive {
            color: var(--accent-green);
        }
        
        .stat-change.negative {
            color: var(--accent-red);
        }
        
        .main-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 24px;
            margin-bottom: 32px;
        }
        
        .card {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 24px;
            border: 1px solid var(--border);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .card-title {
            font-size: 18px;
            font-weight: 600;
        }
        
        .priority-badge {
            font-size: 12px;
            padding: 4px 10px;
            border-radius: 20px;
            font-weight: 500;
        }
        
        .priority-critical {
            background: rgba(239, 68, 68, 0.2);
            color: var(--accent-red);
        }
        
        .priority-high {
            background: rgba(249, 115, 22, 0.2);
            color: var(--accent-orange);
        }
        
        .priority-medium {
            background: rgba(234, 179, 8, 0.2);
            color: var(--accent-yellow);
        }
        
        .issues-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        
        .issue-item {
            background: var(--bg-dark);
            border-radius: 8px;
            padding: 16px;
            border-left: 4px solid var(--accent-red);
            transition: all 0.2s;
        }
        
        .issue-item:hover {
            background: var(--bg-card-hover);
        }
        
        .issue-item.resolved {
            border-left-color: var(--accent-green);
            opacity: 0.6;
        }
        
        .issue-item.high {
            border-left-color: var(--accent-orange);
        }
        
        .issue-item.medium {
            border-left-color: var(--accent-yellow);
        }
        
        .issue-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 8px;
        }
        
        .issue-title {
            font-weight: 600;
            font-size: 15px;
        }
        
        .issue-asin {
            font-size: 12px;
            color: var(--text-muted);
            font-family: monospace;
        }
        
        .issue-impact {
            font-size: 14px;
            color: var(--accent-red);
            font-weight: 500;
        }
        
        .issue-description {
            color: var(--text-secondary);
            font-size: 14px;
            margin-bottom: 12px;
        }
        
        .issue-actions {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .action-checkbox {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            color: var(--text-secondary);
            cursor: pointer;
        }
        
        .action-checkbox input {
            width: 16px;
            height: 16px;
            accent-color: var(--accent-green);
        }
        
        .action-checkbox:has(input:checked) {
            text-decoration: line-through;
            opacity: 0.6;
        }
        
        .recovery-potential {
            margin-top: 24px;
            padding: 20px;
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(59, 130, 246, 0.1));
            border-radius: 12px;
            border: 1px solid rgba(34, 197, 94, 0.3);
        }
        
        .recovery-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--accent-green);
            margin-bottom: 12px;
        }
        
        .recovery-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
        }
        
        .recovery-stat {
            text-align: center;
        }
        
        .recovery-stat-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--accent-green);
        }
        
        .recovery-stat-label {
            font-size: 12px;
            color: var(--text-secondary);
            margin-top: 4px;
        }
        
        .sku-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .sku-table th {
            text-align: left;
            padding: 12px;
            font-size: 12px;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-bottom: 1px solid var(--border);
        }
        
        .sku-table td {
            padding: 12px;
            font-size: 14px;
            border-bottom: 1px solid var(--border);
        }
        
        .sku-table tr:hover {
            background: var(--bg-card-hover);
        }
        
        .sku-name {
            font-weight: 500;
            max-width: 200px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        .sku-asin {
            font-family: monospace;
            font-size: 11px;
            color: var(--text-muted);
        }
        
        .metric-change {
            display: flex;
            align-items: center;
            gap: 4px;
            font-weight: 500;
        }
        
        .metric-change.up {
            color: var(--accent-green);
        }
        
        .metric-change.down {
            color: var(--accent-red);
        }
        
        .bar-chart-container {
            height: 300px;
            margin-top: 16px;
        }
        
        .phase-timeline {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        
        .phase-item {
            display: flex;
            gap: 16px;
            position: relative;
        }
        
        .phase-item:not(:last-child)::after {
            content: '';
            position: absolute;
            left: 15px;
            top: 36px;
            bottom: -16px;
            width: 2px;
            background: var(--border);
        }
        
        .phase-number {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--accent-blue);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 14px;
            flex-shrink: 0;
        }
        
        .phase-item.completed .phase-number {
            background: var(--accent-green);
        }
        
        .phase-item.current .phase-number {
            background: var(--accent-orange);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(249, 115, 22, 0.4); }
            50% { box-shadow: 0 0 0 8px rgba(249, 115, 22, 0); }
        }
        
        .phase-content h4 {
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 4px;
        }
        
        .phase-content p {
            font-size: 13px;
            color: var(--text-secondary);
        }
        
        .phase-content .phase-date {
            font-size: 11px;
            color: var(--text-muted);
            margin-top: 4px;
        }
        
        .charts-row {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 24px;
            margin-bottom: 32px;
        }
        
        .chart-container {
            height: 280px;
        }
        
        footer {
            text-align: center;
            padding-top: 24px;
            border-top: 1px solid var(--border);
            color: var(--text-muted);
            font-size: 13px;
        }
        
        @media (max-width: 1024px) {
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .main-grid {
                grid-template-columns: 1fr;
            }
            
            .charts-row {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 640px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            header {
                flex-direction: column;
                gap: 16px;
                align-items: flex-start;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <h1>ðŸŽ¯ <span>BSR Recovery</span> Dashboard</h1>
            </div>
            <div class="bsr-badge">
                <div class="bsr-current">BSR #2,800</div>
                <span class="bsr-arrow">â†’</span>
                <div class="bsr-target">Target #1,200</div>
            </div>
        </header>
        
        <!-- Key Metrics -->
        <div class="stats-grid">
            <div class="stat-card">
                <h3>Total Sessions</h3>
                <div class="stat-value">10,146</div>
                <div class="stat-change negative">
                    <span>â†“</span> 7.6% vs prior year
                </div>
            </div>
            <div class="stat-card">
                <h3>Units Ordered</h3>
                <div class="stat-value">2,316</div>
                <div class="stat-change negative">
                    <span>â†“</span> 3.4% vs prior year
                </div>
            </div>
            <div class="stat-card">
                <h3>Revenue</h3>
                <div class="stat-value">$43.7K</div>
                <div class="stat-change negative">
                    <span>â†“</span> 6.3% vs prior year
                </div>
            </div>
            <div class="stat-card">
                <h3>Avg Conversion</h3>
                <div class="stat-value">22.8%</div>
                <div class="stat-change positive">
                    <span>â†‘</span> 1.0pp vs prior year
                </div>
            </div>
        </div>
        
        <!-- Charts Row -->
        <div class="charts-row">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">ðŸ“Š Revenue by SKU (YoY)</h2>
                </div>
                <div class="chart-container">
                    <canvas id="revenueChart"></canvas>
                </div>
            </div>
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">ðŸ“ˆ Session Changes by SKU</h2>
                </div>
                <div class="chart-container">
                    <canvas id="sessionsChart"></canvas>
                </div>
            </div>
        </div>
        
        <!-- Main Grid: Issues & Timeline -->
        <div class="main-grid">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">ðŸš¨ Critical Issues</h2>
                    <span class="priority-badge priority-critical">4 Issues</span>
                </div>
                
                <div class="issues-list">
                    <!-- Issue 1: Accelerator -->
                    <div class="issue-item" data-issue="accelerator">
                        <div class="issue-header">
                            <div>
                                <div class="issue-title">Accelerator Product VANISHED</div>
                                <div class="issue-asin">B00PR0LK7A</div>
                            </div>
                            <div class="issue-impact">-$1,691/mo</div>
                        </div>
                        <div class="issue-description">
                            Had 51.8% conversion (highest in catalog!) â€” now shows 0 sessions, 0 units. 
                            Likely suppressed, stranded, or OOS. This alone could recover ~116 units/month.
                        </div>
                        <div class="issue-actions">
                            <label class="action-checkbox">
                                <input type="checkbox" data-action="accelerator-1"> Check suppression status
                            </label>
                            <label class="action-checkbox">
                                <input type="checkbox" data-action="accelerator-2"> Verify inventory levels
                            </label>
                            <label class="action-checkbox">
                                <input type="checkbox" data-action="accelerator-3"> Check hazmat compliance
                            </label>
                        </div>
                    </div>
                    
                    <!-- Issue 2: 2oz Thin Conversion -->
                    <div class="issue-item high" data-issue="2oz-thin">
                        <div class="issue-header">
                            <div>
                                <div class="issue-title">2oz Thin Conversion Collapsed</div>
                                <div class="issue-asin">B01M8JT9LI</div>
                            </div>
                            <div class="issue-impact">-12.9pp</div>
                        </div>
                        <div class="issue-description">
                            Traffic UP 76% but conversion DOWN from 26.3% â†’ 13.4%. 
                            Something is killing conversions â€” bad reviews? Competitor listing better?
                        </div>
                        <div class="issue-actions">
                            <label class="action-checkbox">
                                <input type="checkbox" data-action="thin-1"> Review recent 1-2â˜… reviews
                            </label>
                            <label class="action-checkbox">
                                <input type="checkbox" data-action="thin-2"> Compare to Starbond listing
                            </label>
                            <label class="action-checkbox">
                                <input type="checkbox" data-action="thin-3"> Audit main image & A+ content
                            </label>
                        </div>
                    </div>
                    
                    <!-- Issue 3: Traffic Evaporated -->
                    <div class="issue-item high" data-issue="traffic">
                        <div class="issue-header">
                            <div>
                                <div class="issue-title">Large Sizes Traffic Evaporated</div>
                                <div class="issue-asin">8oz & 16oz lines</div>
                            </div>
                            <div class="issue-impact">-33% to -55%</div>
                        </div>
                        <div class="issue-description">
                            8oz Thick: -55% sessions | 16oz Pro: -40% sessions | 16oz Medium: -33% sessions.
                            Likely losing organic rank + PPC visibility.
                        </div>
                        <div class="issue-actions">
                            <label class="action-checkbox">
                                <input type="checkbox" data-action="traffic-1"> Check PPC campaign status
                            </label>
                            <label class="action-checkbox">
                                <input type="checkbox" data-action="traffic-2"> Review keyword rankings
                            </label>
                            <label class="action-checkbox">
                                <input type="checkbox" data-action="traffic-3"> Analyze competitor bids
                            </label>
                        </div>
                    </div>
                    
                    <!-- Issue 4: Buy Box Leak -->
                    <div class="issue-item medium" data-issue="buybox">
                        <div class="issue-header">
                            <div>
                                <div class="issue-title">Buy Box Leak</div>
                                <div class="issue-asin">B01MDNS8QB (2oz Medium)</div>
                            </div>
                            <div class="issue-impact">-4.6pp</div>
                        </div>
                        <div class="issue-description">
                            Buy Box dropped from 98.7% â†’ 94.1%. Each 1% lost â‰ˆ 1% lost sales.
                            May have unauthorized resellers.
                        </div>
                        <div class="issue-actions">
                            <label class="action-checkbox">
                                <input type="checkbox" data-action="buybox-1"> Check for unauthorized sellers
                            </label>
                            <label class="action-checkbox">
                                <input type="checkbox" data-action="buybox-2"> Verify pricing competitive
                            </label>
                        </div>
                    </div>
                </div>
                
                <!-- Recovery Potential -->
                <div class="recovery-potential">
                    <div class="recovery-title">ðŸš€ Recovery Potential</div>
                    <div class="recovery-stats">
                        <div class="recovery-stat">
                            <div class="recovery-stat-value">+185</div>
                            <div class="recovery-stat-label">Units/Month</div>
                        </div>
                        <div class="recovery-stat">
                            <div class="recovery-stat-value">+8%</div>
                            <div class="recovery-stat-label">Revenue Growth</div>
                        </div>
                        <div class="recovery-stat">
                            <div class="recovery-stat-value">60-90</div>
                            <div class="recovery-stat-label">Days to BSR ~1,200</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Recovery Timeline -->
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">ðŸ“… Recovery Timeline</h2>
                </div>
                
                <div class="phase-timeline">
                    <div class="phase-item current">
                        <div class="phase-number">1</div>
                        <div class="phase-content">
                            <h4>Triage (This Week)</h4>
                            <p>Fix Accelerator, diagnose 2oz Thin, win back Buy Box</p>
                            <div class="phase-date">Jan 31 â€“ Feb 7</div>
                        </div>
                    </div>
                    
                    <div class="phase-item">
                        <div class="phase-number">2</div>
                        <div class="phase-content">
                            <h4>Traffic Recovery</h4>
                            <p>Boost PPC on 8oz/16oz lines, launch defensive campaigns, optimize budgets</p>
                            <div class="phase-date">Feb 8 â€“ Feb 21</div>
                        </div>
                    </div>
                    
                    <div class="phase-item">
                        <div class="phase-number">3</div>
                        <div class="phase-content">
                            <h4>Competitive Defense</h4>
                            <p>Listing refresh, review velocity, pricing strategy</p>
                            <div class="phase-date">Feb 22 â€“ Mar 7</div>
                        </div>
                    </div>
                    
                    <div class="phase-item">
                        <div class="phase-number">4</div>
                        <div class="phase-content">
                            <h4>BSR Target Achieved</h4>
                            <p>Target: BSR ~1,200-1,500</p>
                            <div class="phase-date">By end of March</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- SKU Performance Table -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">ðŸ“‹ SKU Performance Comparison (YoY)</h2>
            </div>
            <div style="overflow-x: auto;">
                <table class="sku-table">
                    <thead>
                        <tr>
                            <th>Product</th>
                            <th>Sessions</th>
                            <th>Î” Sessions</th>
                            <th>Units</th>
                            <th>Î” Units</th>
                            <th>Conversion</th>
                            <th>Î” Conv</th>
                            <th>Revenue</th>
                            <th>Buy Box</th>
                        </tr>
                    </thead>
                    <tbody id="skuTableBody">
                        <!-- Filled by JS -->
                    </tbody>
                </table>
            </div>
        </div>
        
        <footer>
            <p>Built by Clyde ðŸ¦ž | Last updated: January 31, 2026 at 11:00 PM PT</p>
            <p style="margin-top: 8px;">Data period: Dec 29 â€“ Jan 29 (YoY comparison)</p>
        </footer>
    </div>
    
    <script>
        // SKU Data
        const skuData = [
            { name: '2oz Thick', asin: 'B00WHEM0UA', 
              sessions: { current: 3017, prior: 3765 },
              units: { current: 929, prior: 919 },
              conv: { current: 30.79, prior: 24.41 },
              revenue: { current: 12872.82, prior: 12758.27 },
              buybox: 98.57
            },
            { name: '2oz Medium', asin: 'B01MDNS8QB', 
              sessions: { current: 2783, prior: 2632 },
              units: { current: 646, prior: 622 },
              conv: { current: 23.21, prior: 23.63 },
              revenue: { current: 8838.76, prior: 8560.77 },
              buybox: 94.07
            },
            { name: '8oz Medium', asin: 'B01LZUN030', 
              sessions: { current: 735, prior: 745 },
              units: { current: 181, prior: 185 },
              conv: { current: 24.63, prior: 24.83 },
              revenue: { current: 6418.24, prior: 6438.72 },
              buybox: 96.43
            },
            { name: '2oz Thin âš ï¸', asin: 'B01M8JT9LI', 
              sessions: { current: 1119, prior: 635 },
              units: { current: 150, prior: 167 },
              conv: { current: 13.40, prior: 26.30 },
              revenue: { current: 2090.07, prior: 2297.42 },
              buybox: 97.42
            },
            { name: '20gr Gel', asin: 'B0BPPP62VJ', 
              sessions: { current: 723, prior: 384 },
              units: { current: 97, prior: 49 },
              conv: { current: 13.42, prior: 12.76 },
              revenue: { current: 677.03, prior: 336.51 },
              buybox: 99.74
            },
            { name: '8oz Thick âš ï¸', asin: 'B01CDPIIXK', 
              sessions: { current: 401, prior: 898 },
              units: { current: 105, prior: 135 },
              conv: { current: 26.18, prior: 15.03 },
              revenue: { current: 3562.49, prior: 4565.99 },
              buybox: 96.77
            },
            { name: '16oz Pro Line', asin: 'B01CDPIJ0W', 
              sessions: { current: 313, prior: 526 },
              units: { current: 94, prior: 99 },
              conv: { current: 30.03, prior: 18.82 },
              revenue: { current: 4514.41, prior: 4850.01 },
              buybox: 98.26
            },
            { name: '16oz Medium âš ï¸', asin: 'B01CDPIIC6', 
              sessions: { current: 591, prior: 884 },
              units: { current: 60, prior: 106 },
              conv: { current: 10.15, prior: 11.99 },
              revenue: { current: 2914.90, prior: 5196.22 },
              buybox: 97.75
            },
            { name: '8oz Thin', asin: 'B01CDPIGU0', 
              sessions: { current: 405, prior: 0 },
              units: { current: 51, prior: 0 },
              conv: { current: 12.59, prior: 0 },
              revenue: { current: 1832.97, prior: 0 },
              buybox: 98.77
            },
            { name: 'Accelerator ðŸ”´', asin: 'B00PR0LK7A', 
              sessions: { current: 0, prior: 224 },
              units: { current: 0, prior: 116 },
              conv: { current: 0, prior: 51.79 },
              revenue: { current: 0, prior: 1691.16 },
              buybox: 0
            },
        ];
        
        // Populate table
        const tableBody = document.getElementById('skuTableBody');
        skuData.forEach(sku => {
            const sessionDelta = sku.sessions.prior > 0 
                ? ((sku.sessions.current - sku.sessions.prior) / sku.sessions.prior * 100).toFixed(1)
                : (sku.sessions.current > 0 ? 'NEW' : 'N/A');
            const unitDelta = sku.units.prior > 0 
                ? ((sku.units.current - sku.units.prior) / sku.units.prior * 100).toFixed(1)
                : (sku.units.current > 0 ? 'NEW' : 'N/A');
            const convDelta = sku.conv.prior > 0 
                ? (sku.conv.current - sku.conv.prior).toFixed(1)
                : 'N/A';
            
            const sessionClass = sessionDelta !== 'NEW' && sessionDelta !== 'N/A' && parseFloat(sessionDelta) >= 0 ? 'up' : 'down';
            const unitClass = unitDelta !== 'NEW' && unitDelta !== 'N/A' && parseFloat(unitDelta) >= 0 ? 'up' : 'down';
            const convClass = convDelta !== 'N/A' && parseFloat(convDelta) >= 0 ? 'up' : 'down';
            
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>
                    <div class="sku-name">${sku.name}</div>
                    <div class="sku-asin">${sku.asin}</div>
                </td>
                <td>${sku.sessions.current.toLocaleString()}</td>
                <td><span class="metric-change ${sessionClass}">${sessionDelta !== 'NEW' && sessionDelta !== 'N/A' ? (parseFloat(sessionDelta) >= 0 ? 'â†‘' : 'â†“') + ' ' + Math.abs(sessionDelta) + '%' : sessionDelta}</span></td>
                <td>${sku.units.current.toLocaleString()}</td>
                <td><span class="metric-change ${unitClass}">${unitDelta !== 'NEW' && unitDelta !== 'N/A' ? (parseFloat(unitDelta) >= 0 ? 'â†‘' : 'â†“') + ' ' + Math.abs(unitDelta) + '%' : unitDelta}</span></td>
                <td>${sku.conv.current.toFixed(1)}%</td>
                <td><span class="metric-change ${convClass}">${convDelta !== 'N/A' ? (parseFloat(convDelta) >= 0 ? 'â†‘' : 'â†“') + ' ' + Math.abs(convDelta) + 'pp' : convDelta}</span></td>
                <td>$${sku.revenue.current.toLocaleString()}</td>
                <td>${sku.buybox > 0 ? sku.buybox.toFixed(1) + '%' : 'â€”'}</td>
            `;
            tableBody.appendChild(row);
        });
        
        // Revenue Chart
        const revenueCtx = document.getElementById('revenueChart').getContext('2d');
        new Chart(revenueCtx, {
            type: 'bar',
            data: {
                labels: ['2oz Thick', '2oz Medium', '8oz Med', '16oz Pro', '8oz Thick', '16oz Med', '2oz Thin', 'Accelerator'],
                datasets: [
                    {
                        label: 'Prior Year',
                        data: [12758, 8561, 6439, 4850, 4566, 5196, 2297, 1691],
                        backgroundColor: 'rgba(148, 163, 184, 0.6)',
                        borderColor: 'rgba(148, 163, 184, 1)',
                        borderWidth: 1
                    },
                    {
                        label: 'Current Year',
                        data: [12873, 8839, 6418, 4514, 3562, 2915, 2090, 0],
                        backgroundColor: 'rgba(59, 130, 246, 0.6)',
                        borderColor: 'rgba(59, 130, 246, 1)',
                        borderWidth: 1
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'top',
                        labels: { color: '#94a3b8', font: { size: 12 } }
                    }
                },
                scales: {
                    x: {
                        ticks: { color: '#64748b', font: { size: 11 } },
                        grid: { color: 'rgba(51, 65, 85, 0.5)' }
                    },
                    y: {
                        ticks: { 
                            color: '#64748b',
                            callback: value => '$' + value.toLocaleString()
                        },
                        grid: { color: 'rgba(51, 65, 85, 0.5)' }
                    }
                }
            }
        });
        
        // Sessions Change Chart
        const sessionsCtx = document.getElementById('sessionsChart').getContext('2d');
        new Chart(sessionsCtx, {
            type: 'bar',
            data: {
                labels: ['2oz Thin', '2oz Med', '20gr Gel', '8oz Med', '2oz Thick', '16oz Pro', '16oz Med', '8oz Thick', 'Accelerator'],
                datasets: [{
                    label: 'Session Change %',
                    data: [76.2, 5.7, 88.3, -1.3, -19.9, -40.5, -33.1, -55.3, -100],
                    backgroundColor: ctx => {
                        const value = ctx.raw;
                        return value >= 0 ? 'rgba(34, 197, 94, 0.6)' : 'rgba(239, 68, 68, 0.6)';
                    },
                    borderColor: ctx => {
                        const value = ctx.raw;
                        return value >= 0 ? 'rgba(34, 197, 94, 1)' : 'rgba(239, 68, 68, 1)';
                    },
                    borderWidth: 1
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false }
                },
                scales: {
                    x: {
                        ticks: { 
                            color: '#64748b',
                            callback: value => value + '%'
                        },
                        grid: { color: 'rgba(51, 65, 85, 0.5)' }
                    },
                    y: {
                        ticks: { color: '#94a3b8', font: { size: 11 } },
                        grid: { display: false }
                    }
                }
            }
        });
        
        // Save checkbox state to localStorage
        document.querySelectorAll('.action-checkbox input').forEach(checkbox => {
            const key = 'bsr-recovery-' + checkbox.dataset.action;
            checkbox.checked = localStorage.getItem(key) === 'true';
            checkbox.addEventListener('change', () => {
                localStorage.setItem(key, checkbox.checked);
            });
        });
    </script>
</body>
</html>
